import"./base-9ed7a3b4.js";import{E as V}from"./el-card-071e0827.js";import{E as b,a as E}from"./el-form-item-a5242619.js";import{E as y}from"./el-button-3b2ee6a5.js";import{E as F}from"./el-input-feb7aa1f.js";import{d as L,r as f,x as P,a as R,k as S,y as k,m as B,c as q,b as n,w as r,e as C,p as d,u as o,z as N,A as I,q as U,B as A,s as T}from"./index-fee14184.js";import{d as h}from"./admin-b20f8c58.js";import{f as z}from"./favicon-de9023fc.js";import{E as D}from"./request-56692d6c.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import"./use-form-item-70fcde04.js";import"./_initCloneObject-6cd35402.js";import"./index-61ed4cec.js";import"./isNil-c75b1b34.js";const $=L("LoginPannel",()=>{const m=f({prefix:P(),username:"",password:"",pending:!1}),t=f(null);return{loginForm:m,loginFormRef:t}}),j={class:"container"},G=["src"],H=R({__name:"LoginPannel",setup(m){const t=S();k()==="1"&&t.push("/admin");const _=$(),{loginForm:e,loginFormRef:p}=B(_),g={prefix:[{required:!0,message:"请输入路由前缀",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},c=async i=>{if(!i||!await i.validate(()=>{}))return;A(e.value.prefix),e.value.pending=!0;const a=await h({username:e.value.username,password:e.value.password})??"failed";e.value.pending=!1,a.toString()!=="failed"&&(e.value.username="",e.value.password="",D.success("登陆成功"),T("1"),t.push("/admin"))};return(i,a)=>{const u=F,l=b,x=y,v=E,w=V;return C(),q("div",j,[n(w,null,{default:r(()=>[d("h1",null,[d("img",{src:o(z),alt:"logo"},null,8,G)]),d("h2",null,N(o(I)()),1),n(v,{ref_key:"loginFormRef",ref:p,model:o(e),rules:g,"label-width":"auto"},{default:r(()=>[n(l,{label:"路由前缀",prop:"prefix"},{default:r(()=>[n(u,{modelValue:o(e).prefix,"onUpdate:modelValue":a[0]||(a[0]=s=>o(e).prefix=s)},null,8,["modelValue"])]),_:1}),n(l,{label:"用户名",prop:"username"},{default:r(()=>[n(u,{modelValue:o(e).username,"onUpdate:modelValue":a[1]||(a[1]=s=>o(e).username=s)},null,8,["modelValue"])]),_:1}),n(l,{label:"密码",prop:"password"},{default:r(()=>[n(u,{modelValue:o(e).password,"onUpdate:modelValue":a[2]||(a[2]=s=>o(e).password=s)},null,8,["modelValue"])]),_:1}),n(l,{class:"center"},{default:r(()=>[n(x,{type:"primary",onClick:a[3]||(a[3]=s=>c(o(p))),disabled:o(e).pending,loading:o(e).pending},{default:r(()=>[U(" 登陆 ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}});const te=M(H,[["__scopeId","data-v-7d3c2ad4"]]);export{te as default};
