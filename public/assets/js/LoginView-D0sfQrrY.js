import{b as F,r as d,k as x,w as B,c as L,n as a,u as R,p as C,v as $,f as c,q as f,e as g,t as N,l as s,s as v,x as w,E as q,y as I,z as K,A as S,B as A}from"./.pnpm-CR973naf.js";import{g as D,a as U,l as z,s as M,b as T}from"./index-BcjYLXzc.js";import{f as h}from"./favicon-BrYC5Vmz.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"container"},H=["src"],J=F({__name:"LoginView",setup(O){const r=R();D()==="1"&&r.push("/admin");const y=()=>r.push("/register"),u=d(!1),o=d({username:"",password:""}),n=d(null),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},i=async m=>{if(!(!m||!await m.validate()))try{u.value=!0;const e=await z({username:o.value.username,password:o.value.password});q.success("登陆成功"),M("1");const l=e.data.role;T(l),r.push(`/${l}`)}finally{u.value=!1}};return(m,e)=>{const l=I,p=K,_=S,b=A,k=C,E=$;return c(),x("div",G,[B((c(),L(k,null,{default:a(()=>[f("h1",null,[f("img",{src:g(h),alt:"logo"},null,8,H)]),f("h2",null,"登陆 | "+N(g(U)()),1),s(b,{ref_key:"loginFormRef",ref:n,model:o.value,rules:V,"label-width":"auto"},{default:a(()=>[s(p,{label:"用户名",prop:"username"},{default:a(()=>[s(l,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.username=t),onKeyup:e[1]||(e[1]=v(t=>i(n.value),["enter"]))},null,8,["modelValue"])]),_:1}),s(p,{label:"密码",prop:"password"},{default:a(()=>[s(l,{modelValue:o.value.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.password=t),type:"password",onKeyup:e[3]||(e[3]=v(t=>i(n.value),["enter"]))},null,8,["modelValue"])]),_:1}),s(p,{class:"center"},{default:a(()=>[s(_,{type:"primary",onClick:e[4]||(e[4]=t=>y())},{default:a(()=>[w("注册")]),_:1}),s(_,{type:"primary",onClick:e[5]||(e[5]=t=>i(n.value))},{default:a(()=>[w("登陆")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[E,u.value]])])}}}),Y=j(J,[["__scopeId","data-v-76f977eb"]]);export{Y as default};
