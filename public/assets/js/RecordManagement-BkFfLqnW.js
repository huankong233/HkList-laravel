import{b as E,r as i,o as I,e as y,j as $,k as e,m as r,s as c,w as M,c as h,t as w,F as B,E as z,z as L,M as P,O as T,a0 as U,v as F}from"./.pnpm-Mf6j6NBF.js";import{i as m}from"./index-CtsYjQAc.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V=n=>m.get(`/admin/record?page=${n.page}&size=${n.size}`),j=n=>m.delete("/admin/record",{data:{record_ids:[n.id]}}),A=n=>m.delete("/admin/record",{data:{record_ids:n}}),O=E({__name:"RecordManagement",setup(n){const s=i(!1),p=i(15),u=i(1),_=i(),g=i([]),d=async()=>{try{s.value=!0;const o=await V({page:u.value,size:p.value});_.value=o.data}finally{s.value=!1}},C=async o=>{try{s.value=!0,await j(o),z.success("删除记录成功")}finally{s.value=!1,await d()}},R=async()=>{try{s.value=!0;const o=g.value.map(l=>l.id);await A(o),z.success("删除记录成功")}finally{s.value=!1,await d()}},k=o=>g.value=o;return I(d),(o,l)=>{var b,f;const v=L,a=P,D=T,S=U,x=F;return y(),$(B,null,[e(v,{type:"primary",onClick:l[0]||(l[0]=t=>d())},{default:r(()=>[c("刷新列表")]),_:1}),e(v,{type:"danger",disabled:g.value.length<=0,onClick:l[1]||(l[1]=t=>R())},{default:r(()=>[c(" 批量删除 ")]),_:1},8,["disabled"]),M((y(),h(D,{data:((b=_.value)==null?void 0:b.data)??[],border:"","show-overflow-tooltip":"",class:"table",onSelectionChange:k},{default:r(()=>[e(a,{type:"selection",width:"40"}),e(a,{prop:"id",label:"ID"}),e(a,{prop:"ip",label:"IP"}),e(a,{prop:"fs_id",label:"文件ID"}),e(a,{prop:"filename",label:"文件名"}),e(a,{prop:"size",label:"文件大小"}),e(a,{prop:"url",label:"下载链接"}),e(a,{prop:"ua",label:"UA"}),e(a,{prop:"user_id",label:"用户ID"}),e(a,{prop:"normal_account_id",label:"dlink账号ID"}),e(a,{prop:"account_id",label:"reallink账号ID"}),e(a,{prop:"created_at",label:"创建时间"},{default:r(({row:t})=>[c(w(new Date(t.created_at).toLocaleString()),1)]),_:1}),e(a,{prop:"updated_at",label:"更新时间"},{default:r(({row:t})=>[c(w(new Date(t.updated_at).toLocaleString()),1)]),_:1}),e(a,{width:"150",label:"操作",fixed:"right"},{default:r(({row:t})=>[e(v,{size:"small",type:"danger",onClick:q=>C(t)},{default:r(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[x,s.value]]),e(S,{"current-page":u.value,"onUpdate:currentPage":l[2]||(l[2]=t=>u.value=t),"page-size":p.value,"onUpdate:pageSize":l[3]||(l[3]=t=>p.value=t),"page-sizes":[15,30,50,100],total:((f=_.value)==null?void 0:f.total)??100,layout:"sizes, prev, pager, next",onSizeChange:d,onCurrentChange:d},null,8,["current-page","page-size","total"])],64)}}}),K=N(O,[["__scopeId","data-v-5e2bbb46"]]);export{K as default};
